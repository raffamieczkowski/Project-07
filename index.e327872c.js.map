{"mappings":"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","sources":["src/js/modal-movie.js","src/js/api-key.js","src/js/genres.js","src/js/search-film.js","src/js/pagination.js","src/js/movies.js"],"sourcesContent":["function createModal(movie) {\r\n  const modalMovieEl = document.querySelector('.modal-movie');\r\n  const backdrop = document.querySelector('.backdrop');\r\n\r\n  const markup = `\r\n    <div class=\"modal-movie__poster-box\">\r\n      <img class=\"modal-movie__poster\" src=\"https://image.tmdb.org/t/p/original${movie.poster_path}\" alt=\"${movie.original_title}\" />\r\n    </div>\r\n    <button class=\"modal-movie__btn-close\">\r\n    \r\n      <img src=\"src/images/close.\" alt=\"close\" width=\"14px\"/>\r\n    </button>\r\n\r\n    <div class=\"modal-movie__info\">\r\n      <h2 class=\"modal-movie__title\">${movie.title}</h2>\r\n\r\n      <ul class=\"modal-movie__list\">\r\n        <li class=\"modal-movie__item modal-movie__item--label\">vote / votes</li>\r\n        <li class=\"modal-movie__item modal-movie__item--value\">\r\n          <span class=\"modal-movie__vote\">${movie.vote_average}</span> <span>/ </span><span>${movie.vote_count}</span>\r\n        </li>\r\n        <li class=\"modal-movie__item modal-movie__item--label\">popularity</li>\r\n        <li class=\"modal-movie__item modal-movie__item--value\"><span class=\"modal-movie__popularity\">${movie.popularity}</span></li>\r\n        <li class=\"modal-movie__item modal-movie__item--label\">original title</li>\r\n        <li class=\"modal-movie__item modal-movie__item--value\"><span class=\"modal-movie__original-title\">${movie.original_title}</span></li>\r\n        <li class=\"modal-movie__item modal-movie__item--label\">genre</li>\r\n        <li class=\"modal-movie__item modal-movie__item--value\"><span class=\"modal-movie__genre\"></span></li>\r\n      </ul>\r\n      <div class=\"modal-movie__description\">\r\n        <h3 class=\"modal-movie__about\">about</h3>\r\n        <p class=\"modal-movie__text\">${movie.overview}</p>\r\n      </div>\r\n\r\n      <div class=\"modal-movie__btns\">\r\n        <button class=\"modal-movie__btn-watched\">add to watched</button>\r\n        <button class=\"modal-movie__btn-queue\">add to queue</button>\r\n      </div>\r\n    </div>\r\n  `;\r\n  modalMovieEl.innerHTML = markup;\r\n\r\n  const closeModalBtn = modalMovieEl.querySelector('.modal-movie__btn-close');\r\n  closeModalBtn.addEventListener('click', () => {\r\n    closeBackdrop();\r\n  });\r\n\r\n  backdrop.addEventListener('click', event => {\r\n    if (event.target === backdrop) {\r\n      closeBackdrop();\r\n    }\r\n  });\r\n\r\n  document.addEventListener('keydown', event => {\r\n    if (event.key === 'Escape') {\r\n      closeBackdrop();\r\n    }\r\n  });\r\n\r\n  function closeBackdrop() {\r\n    backdrop.classList.add('is-hidden');\r\n  }\r\n}\r\n\r\nfunction openModal(movie) {\r\n  const modal = createModal(movie);\r\n}\r\n\r\nexport { openModal };\r\n","export const API_KEY = '4c48f56c563cad897bb4af72634cd546';\n","import { API_KEY } from '../js/api-key';\r\n\r\nasync function getGenres(movieId) {\r\n  try {\r\n    const response = await fetch(`https://api.themoviedb.org/3/movie/${movieId}?api_key=${API_KEY}&language=en-US`);\r\n    const movie = await response.json();\r\n    const genres = movie.genres.map(genre => genre.name).join(', ');\r\n    return genres;\r\n  } catch (error) {\r\n    console.error(error);\r\n    return '';\r\n  }\r\n}\r\n\r\nexport { getGenres };","import { API_KEY } from './api-key';\r\nimport { getGenres } from './genres';\r\nimport { createPagination } from './pagination';\r\n\r\nimport { openModal } from './modal-movie';\r\n\r\nconst resultContainer = document.querySelector('.result__container');\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const form = document.querySelector('.header__form');\r\n  const input = document.querySelector('.form__input');\r\n\r\n  const searchButton = document.querySelector('.form__button');\r\n\r\n  form.addEventListener('submit', handleFormSubmit);\r\n  searchButton.addEventListener('click', handleFormSubmit);\r\n\r\n  function handleFormSubmit(event) {\r\n    event.preventDefault();\r\n    const searchTerm = input.value.trim();\r\n    if (searchTerm !== '') {\r\n      searchMovies(searchTerm);\r\n    } else {\r\n      resultContainer.innerHTML = '';\r\n      fetchMovies();\r\n    }\r\n  }\r\n});\r\n\r\nasync function searchMovies(searchTerm) {\r\n  const apiKey = API_KEY;\r\n  const url = `https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&query=${encodeURIComponent(\r\n    searchTerm,\r\n  )}`;\r\n\r\n  (async () => {\r\n    createPagination(url);\r\n  })();\r\n}\r\n\r\nfunction displayMovies(results) {\r\n  resultContainer.innerHTML = '';\r\n\r\n  results.forEach(movie => {\r\n    const movieCard = createMovieCard(movie);\r\n    resultContainer.appendChild(movieCard);\r\n  });\r\n}\r\n\r\nfunction createMovieCard(movie) {\r\n  const movieCard = document.createElement('div');\r\n  movieCard.classList.add('movie__card');\r\n\r\n  const movieLink = document.createElement('a');\r\n  movieLink.href = '#';\r\n\r\n  const moviePoster = document.createElement('img');\r\n  moviePoster.classList.add('movie__poster');\r\n  moviePoster.src = `https://image.tmdb.org/t/p/original${movie.poster_path}`;\r\n  movieLink.appendChild(moviePoster);\r\n\r\n  const movieShortDescr = document.createElement('ul');\r\n  movieShortDescr.classList.add('movie__short-descr');\r\n\r\n  const movieTitle = document.createElement('li');\r\n  movieTitle.classList.add('movie__title');\r\n  movieTitle.textContent = movie.original_title;\r\n  movieShortDescr.appendChild(movieTitle);\r\n\r\n  const movieGenre = document.createElement('li');\r\n  movieGenre.classList.add('movie__genre');\r\n  movieGenre.textContent = `${movie.genres} | ${movie.release_date.slice(0, 4)}`;\r\n  movieShortDescr.appendChild(movieGenre);\r\n\r\n  movieCard.appendChild(movieLink);\r\n  movieCard.appendChild(movieShortDescr);\r\n\r\n  moviePoster.addEventListener('click', e => {\r\n    e.preventDefault();\r\n    const backdrop = document.querySelector('.backdrop');\r\n    backdrop.classList.remove('is-hidden');\r\n    openModal(movie);\r\n  });\r\n\r\n  return movieCard;\r\n}\r\n\r\nexport { displayMovies };\r\n","import { displayMovies } from './search-film';\r\nimport { getGenres } from './genres';\r\n\r\nlet currentPage = 1;\r\nconst itemsPerPage = 20;\r\n\r\nfunction createPaginationButton(text, isDisabled, isCurrent) {\r\n  const button = document.createElement('button');\r\n  button.textContent = text;\r\n  button.disabled = isDisabled;\r\n  if (isCurrent) {\r\n    button.classList.add('pagination-button--current');\r\n  }\r\n  button.classList.add('pagination-button');\r\n  return button;\r\n}\r\n\r\nasync function createPagination(url) {\r\n  try {\r\n    const response = await fetch(`${url}&page=${currentPage}`);\r\n    console.log(response);\r\n    const data = await response.json();\r\n    const totalPages = Math.ceil(data.total_pages / itemsPerPage);\r\n    const genrePromises = data.results.map(movie => getGenres(movie.id));\r\n    const genres = await Promise.all(genrePromises);\r\n\r\n    data.results.forEach((movie, index) => {\r\n      movie.genres = genres[index];\r\n    });\r\n\r\n    displayMovies(data.results);\r\n    renderPagination(totalPages, url);\r\n  } catch (error) {\r\n    console.log('Error', error);\r\n  }\r\n}\r\n\r\nfunction renderPagination(totalPages, url) {\r\n  const paginationContainer = document.querySelector('.pagination-container');\r\n  paginationContainer.innerHTML = '';\r\n\r\n  const previousButton = createPaginationButton('<', currentPage === 1, false);\r\n  previousButton.addEventListener('click', async () => {\r\n    currentPage--;\r\n    await createPagination(url);\r\n  });\r\n  previousButton.classList.add('pagination-button--previous');\r\n  paginationContainer.appendChild(previousButton);\r\n\r\n  if (totalPages <= 7) {\r\n    for (let i = 1; i <= totalPages; i++) {\r\n      const pageButton = createPaginationButton(i.toString(), i === currentPage, i === currentPage);\r\n      pageButton.addEventListener('click', async () => {\r\n        currentPage = i;\r\n        await createPagination(url);\r\n      });\r\n      paginationContainer.appendChild(pageButton);\r\n    }\r\n  } else {\r\n    const firstPageButton = createPaginationButton('1', currentPage === 1, currentPage === 1);\r\n    firstPageButton.addEventListener('click', async () => {\r\n      currentPage = 1;\r\n      await createPagination(url);\r\n    });\r\n    paginationContainer.appendChild(firstPageButton);\r\n\r\n    let startPage = Math.max(2, currentPage - 2);\r\n    let endPage = Math.min(totalPages - 1, currentPage + 2);\r\n\r\n    if (currentPage <= 3) {\r\n      endPage = 5;\r\n    } else if (currentPage >= totalPages - 2) {\r\n      startPage = totalPages - 4;\r\n    }\r\n\r\n    if (startPage > 2) {\r\n      paginationContainer.appendChild(createPaginationButton('...', false));\r\n    }\r\n\r\n    for (let i = startPage; i <= endPage; i++) {\r\n      const pageButton = createPaginationButton(i.toString(), i === currentPage, i === currentPage);\r\n      pageButton.addEventListener('click', async () => {\r\n        currentPage = i;\r\n        await createPagination(url);\r\n      });\r\n      paginationContainer.appendChild(pageButton);\r\n    }\r\n\r\n    if (endPage < totalPages - 1) {\r\n      paginationContainer.appendChild(createPaginationButton('...', false));\r\n    }\r\n\r\n    const lastPageButton = createPaginationButton(\r\n      totalPages.toString(),\r\n      currentPage === totalPages,\r\n      currentPage === totalPages,\r\n    );\r\n    lastPageButton.addEventListener('click', async () => {\r\n      currentPage = totalPages;\r\n      await createPagination(url);\r\n    });\r\n    paginationContainer.appendChild(lastPageButton);\r\n  }\r\n\r\n  const nextButton = createPaginationButton('>', currentPage === totalPages, false);\r\n  nextButton.addEventListener('click', async () => {\r\n    currentPage++;\r\n    await createPagination(url);\r\n  });\r\n  nextButton.classList.add('pagination-button--next');\r\n  paginationContainer.appendChild(nextButton);\r\n}\r\n\r\nexport { createPagination };\r\n","import { API_KEY } from './api-key';\r\nimport { getGenres } from './genres';\r\nimport { createPagination } from './pagination';\r\nconst trendingUrl = 'https://api.themoviedb.org/3/trending/movie/day?language=en-US';\r\n\r\n(async () => {\r\n  createPagination(`${trendingUrl}&api_key=${API_KEY}`);\r\n})();\r\n"],"names":["$a898f20bd771b561$export$a7f6cffb6b8ba11c","movie","modalMovieEl","document","querySelector","backdrop","markup","poster_path","original_title","title","vote_average","vote_count","popularity","overview","closeBackdrop","classList","add","innerHTML","addEventListener","event","target","key","$a898f20bd771b561$var$createModal","$a576d362b369eae0$export$a9861bd62f48e142","async","$bc36aade2b53bb55$export$c5604fa8028da00","movieId","response","fetch","json","genres","map","genre","name","join","error","console","$409b227334d5b635$var$resultContainer","$409b227334d5b635$export$80c33a899040816b","results","forEach","movieCard","createElement","movieLink","href","moviePoster","src","appendChild","movieShortDescr","movieTitle","textContent","movieGenre","release_date","slice","e","preventDefault","remove","$409b227334d5b635$var$createMovieCard","form","input","searchButton","handleFormSubmit","searchTerm","value","trim","url","encodeURIComponent","$baa48fd5a30d32e8$export$7f3155e3cda021fd","$409b227334d5b635$var$searchMovies","fetchMovies","$baa48fd5a30d32e8$var$currentPage","$baa48fd5a30d32e8$var$createPaginationButton","text","isDisabled","isCurrent","button","disabled","log","data","totalPages","Math","ceil","total_pages","genrePromises","id","Promise","all","index","paginationContainer","previousButton","i","pageButton","toString","firstPageButton","startPage","max","endPage","min","lastPageButton","nextButton","$baa48fd5a30d32e8$var$renderPagination"],"version":3,"file":"index.e327872c.js.map"}