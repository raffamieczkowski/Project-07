function e(e){!function(e){const t=document.querySelector(".modal-movie"),n=document.querySelector(".backdrop"),a=`\n    <div class="modal-movie__poster-box">\n      <img class="modal-movie__poster" src="https://image.tmdb.org/t/p/original${e.poster_path}" alt="${e.original_title}" />\n    </div>\n    <button class="modal-movie__btn-close">&times\n    </button>\n\n    <div class="modal-movie__info">\n      <h2 class="modal-movie__title">${e.title}</h2>\n\n      <ul class="modal-movie__list">\n        <li class="modal-movie__item modal-movie__item--label">vote / votes</li>\n        <li class="modal-movie__item modal-movie__item--value">\n          <span class="modal-movie__vote">${e.vote_average.toFixed(1)}</span> <span>/ </span><span>${e.vote_count}</span>\n        </li>\n        <li class="modal-movie__item modal-movie__item--label">popularity</li>\n        <li class="modal-movie__item modal-movie__item--value"><span class="modal-movie__popularity">${e.popularity.toFixed(1)}</span></li>\n        <li class="modal-movie__item modal-movie__item--label">original title</li>\n        <li class="modal-movie__item modal-movie__item--value"><span class="modal-movie__original-title">${e.original_title}</span></li>\n        <li class="modal-movie__item modal-movie__item--label">genre</li>\n        <li class="modal-movie__item modal-movie__item--value"><span class="modal-movie__genre"></span></li>\n      </ul>\n      <div class="modal-movie__description">\n        <h3 class="modal-movie__about">about</h3>\n        <p class="modal-movie__text">${e.overview}</p>\n      </div>\n\n      <div class="modal-movie__btns">\n        <button class="modal-movie__btn-watched">add to watched</button>\n        <button class="modal-movie__btn-queue" data-id=${e.id}>add to queue</button>\n      </div>\n    </div>\n  `;function o(){n.classList.add("is-hidden")}t.innerHTML=a,t.querySelector(".modal-movie__btn-close").addEventListener("click",(()=>{o()})),n.addEventListener("click",(e=>{e.target===n&&o()})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&o()}))}(e)}const t="4c48f56c563cad897bb4af72634cd546";async function n(e){try{const n=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=${t}&language=en-US`),a=await n.json();return a.genres.map((e=>e.name)).join(", ")}catch(e){return console.error(e),""}}const a=document.querySelector(".result__container");function o(t){a.innerHTML="",t.forEach((t=>{const n=function(t){const n=document.createElement("div");n.classList.add("movie__card");const a=document.createElement("a");a.href="#";const o=document.createElement("img");o.classList.add("movie__poster"),o.src=`https://image.tmdb.org/t/p/original${t.poster_path}`,a.appendChild(o);const i=document.createElement("ul");i.classList.add("movie__short-descr");const s=document.createElement("li");s.classList.add("movie__title"),s.textContent=t.original_title,i.appendChild(s);const l=document.createElement("li");return l.classList.add("movie__genre"),l.textContent=`${t.genres} | ${t.release_date.slice(0,4)}`,i.appendChild(l),n.appendChild(a),n.appendChild(i),o.addEventListener("click",(n=>{n.preventDefault();document.querySelector(".backdrop").classList.remove("is-hidden"),e(t)})),n}(t);a.appendChild(n)}))}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".header__form"),n=document.querySelector(".form__input"),o=document.querySelector(".form__button");function i(e){e.preventDefault();const o=n.value.trim();""!==o?async function(e){const n=`https://api.themoviedb.org/3/search/movie?api_key=${t}&query=${encodeURIComponent(e)}`;(async()=>{l(n)})()}(o):(a.innerHTML="",fetchMovies())}e.addEventListener("submit",i),o.addEventListener("click",i)}));let i=1;function s(e,t,n){const a=document.createElement("button");return a.textContent=e,a.disabled=t,n&&a.classList.add("pagination-button--current"),a.classList.add("pagination-button"),a}async function l(e){try{const t=await fetch(`${e}&page=${i}`);console.log(t);const a=await t.json(),c=Math.ceil(a.total_pages/20),d=a.results.map((e=>n(e.id))),m=await Promise.all(d);a.results.forEach(((e,t)=>{e.genres=m[t]})),o(a.results),function(e,t){const n=document.querySelector(".pagination-container");n.innerHTML="";const a=s("<",1===i,!1);if(a.addEventListener("click",(async()=>{i--,await l(t)})),a.classList.add("pagination-button--previous"),n.appendChild(a),e<=7)for(let a=1;a<=e;a++){const e=s(a.toString(),a===i,a===i);e.addEventListener("click",(async()=>{i=a,await l(t)})),n.appendChild(e)}else{const a=s("1",1===i,1===i);a.addEventListener("click",(async()=>{i=1,await l(t)})),n.appendChild(a);let o=Math.max(2,i-2),c=Math.min(e-1,i+2);i<=3?c=5:i>=e-2&&(o=e-4),o>2&&n.appendChild(s("...",!1));for(let e=o;e<=c;e++){const a=s(e.toString(),e===i,e===i);a.addEventListener("click",(async()=>{i=e,await l(t)})),n.appendChild(a)}c<e-1&&n.appendChild(s("...",!1));const d=s(e.toString(),i===e,i===e);d.addEventListener("click",(async()=>{i=e,await l(t)})),n.appendChild(d)}const o=s(">",i===e,!1);o.addEventListener("click",(async()=>{i++,await l(t)})),o.classList.add("pagination-button--next"),n.appendChild(o)}(c,e)}catch(e){console.log("Error",e)}}(async()=>{l(`https://api.themoviedb.org/3/trending/movie/day?language=en-US&api_key=${t}`)})();const c=new class{getFromLS(){let e;return e=null===localStorage.getItem("movies")?[]:JSON.parse(localStorage.getItem("movies")),e}saveIntoLS(e){const t=this.getFromLS();t.push(e),localStorage.setItem("movies",JSON.stringify(t))}};document.addEventListener("click",(e=>{if(e.target.classList.contains("modal-movie__btn-queue")){const t=e.target.offsetParent,n={id:e.target.dataset.id,name:t.querySelector(".modal-movie__title").textContent,poster:t.querySelector(".modal-movie__poster").src};c.saveIntoLS(n)}})),localStorage.clear();
//# sourceMappingURL=index.71a9e778.js.map
