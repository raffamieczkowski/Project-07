const e=document.querySelector(".movies-list"),t=document.querySelector(".backdrop"),n=document.querySelector(".modal-movie__btn-close");e.addEventListener("click",(()=>{t.classList.remove("is-hidden")})),n.addEventListener("click",(()=>{t.classList.add("is-hidden")}));const o="4c48f56c563cad897bb4af72634cd546";async function a(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=${o}&language=en-US`),n=await t.json();return n.genres.map((e=>e.name)).join(", ")}catch(e){return console.error(e),""}}const c=document.querySelector(".movies-list");!async function(){try{const e=await fetch(`https://api.themoviedb.org/3/trending/movie/day?language=en-US&api_key=${o}&page=1`),t=(await e.json()).results,n=t.map((e=>a(e.id))),i=await Promise.all(n),r=t.map(((e,t)=>(e.genres=i[t],`<div class="movie__card">\n        <a href="#"> <img class="movie__poster" src="https://image.tmdb.org/t/p/original${e.poster_path}" /></a>\n        <ul class="movie__short-descr">\n          <li class="movie__title">${e.original_title}</li>\n          <li class="movie__genre">${e.genres} | ${e.release_date.slice(0,4)}</li>\n        </ul>\n      </div>`))).join("");c.insertAdjacentHTML("beforeend",r)}catch(e){console.error(e)}}(),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".header__form"),t=document.querySelector(".form__input"),n=document.querySelector(".result__container"),c=document.querySelector(".form__button");function i(e){e.preventDefault();const c=t.value.trim();""!==c&&async function(e){const t=`https://api.themoviedb.org/3/search/movie?api_key=${o}&query=${encodeURIComponent(e)}`;try{const e=await fetch(t),o=(await e.json()).results,i=o.map((e=>a(e.id))),r=await Promise.all(i);o.forEach(((e,t)=>{e.genres=r[t]})),c=o,n.innerHTML="",c.forEach((e=>{const t=function(e){const t=document.createElement("div");t.classList.add("movie__card");const n=document.createElement("a");n.href="#";const o=document.createElement("img");o.classList.add("movie__poster"),o.src=`https://image.tmdb.org/t/p/original${e.poster_path}`,n.appendChild(o);const a=document.createElement("ul");a.classList.add("movie__short-descr");const c=document.createElement("li");c.classList.add("movie__title"),c.textContent=e.original_title,a.appendChild(c);const i=document.createElement("li");return i.classList.add("movie__genre"),i.textContent=`${e.genres} | ${e.release_date.slice(0,4)}`,a.appendChild(i),t.appendChild(n),t.appendChild(a),t}(e);n.appendChild(t)}))}catch(e){console.log("An error occurred:",e)}var c}(c)}e.addEventListener("submit",i),c.addEventListener("click",i)}));
//# sourceMappingURL=index.f1f23c57.js.map
