const e=document.querySelector(".movies-list"),t=document.querySelector(".backdrop"),n=document.querySelector(".modal-movie__btn-close");e.addEventListener("click",(()=>{t.classList.remove("is-hidden")})),n.addEventListener("click",(()=>{t.classList.add("is-hidden")}));const o="4c48f56c563cad897bb4af72634cd546";async function i(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=${o}&language=en-US`),n=await t.json();return n.genres.map((e=>e.name)).join(", ")}catch(e){return console.error(e),""}}const a=document.querySelector(".movies-list");!async function(){try{const e=await fetch(`https://api.themoviedb.org/3/trending/movie/day?language=en-US&api_key=${o}&page=1`),t=(await e.json()).results,n=t.map((e=>i(e.id))),c=await Promise.all(n),r=t.map(((e,t)=>(e.genres=c[t],`<div class="movie__card">\n        <a href="#"> <img class="movie__poster" src="https://image.tmdb.org/t/p/original${e.poster_path}" /></a>\n        <ul class="movie__short-descr">\n          <li class="movie__title">${e.original_title}</li>\n          <li class="movie__genre">${e.genres} | ${e.release_date.slice(0,4)}</li>\n        </ul>\n      </div>`))).join("");a.insertAdjacentHTML("beforeend",r)}catch(e){console.error(e)}}(),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".header__form"),t=document.querySelector(".form__input"),n=document.querySelector(".result__container"),a=document.querySelector(".form__button"),c=document.querySelector(".movies-list");function r(e){e.preventDefault();const a=t.value.trim();""!==a&&async function(e){const t=`https://api.themoviedb.org/3/search/movie?api_key=${o}&query=${encodeURIComponent(e)}`;try{const e=await fetch(t),o=(await e.json()).results,r=o.map((e=>i(e.id))),s=await Promise.all(r);o.forEach(((e,t)=>{e.genres=s[t]})),a=o,n.innerHTML="",a.forEach((e=>{const t=function(e){const t=document.createElement("div");t.classList.add("movie__card");const n=document.createElement("a");n.href="#";const o=document.createElement("img");o.classList.add("movie__poster"),o.src=`https://image.tmdb.org/t/p/original${e.poster_path}`,n.appendChild(o);const i=document.createElement("ul");i.classList.add("movie__short-descr");const a=document.createElement("li");a.classList.add("movie__title"),a.textContent=e.original_title,i.appendChild(a);const c=document.createElement("li");return c.classList.add("movie__genre"),c.textContent=`${e.genres} | ${e.release_date.slice(0,4)}`,i.appendChild(c),t.appendChild(n),t.appendChild(i),t}(e);n.appendChild(t)})),c.innerHTML=""}catch(e){console.log("An error occurred:",e)}var a}(a)}e.addEventListener("submit",r),a.addEventListener("click",r)}));
//# sourceMappingURL=index.3e1d37ce.js.map
