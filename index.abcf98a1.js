const e=document.querySelector(".movies-list"),t=document.querySelector(".backdrop"),n=document.querySelector(".modal-movie__btn-close");e.addEventListener("click",(()=>{t.classList.remove("is-hidden")})),n.addEventListener("click",(()=>{t.classList.add("is-hidden")}));const a="4c48f56c563cad897bb4af72634cd546";async function c(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=${a}&language=en-US`),n=await t.json();return n.genres.map((e=>e.name)).join(", ")}catch(e){return console.error(e),""}}const i=document.querySelector(".result__container");function o(e){i.innerHTML="",e.forEach((e=>{const t=function(e){const t=document.createElement("div");t.classList.add("movie__card");const n=document.createElement("a");n.href="#";const a=document.createElement("img");a.classList.add("movie__poster"),a.src=`https://image.tmdb.org/t/p/original${e.poster_path}`,n.appendChild(a);const c=document.createElement("ul");c.classList.add("movie__short-descr");const i=document.createElement("li");i.classList.add("movie__title"),i.textContent=e.original_title,c.appendChild(i);const o=document.createElement("li");return o.classList.add("movie__genre"),o.textContent=`${e.genres} | ${e.release_date.slice(0,4)}`,c.appendChild(o),t.appendChild(n),t.appendChild(c),t}(e);i.appendChild(t)}))}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".header__form"),t=document.querySelector(".form__input"),n=document.querySelector(".form__button");function c(e){e.preventDefault();const n=t.value.trim();""!==n?async function(e){const t=`https://api.themoviedb.org/3/search/movie?api_key=${a}&query=${encodeURIComponent(e)}`;(async()=>{r(t)})()}(n):(i.innerHTML="",fetchMovies())}e.addEventListener("submit",c),n.addEventListener("click",c)}));let s=1;function d(e,t,n){const a=document.createElement("button");return a.textContent=e,a.disabled=t,n&&a.classList.add("pagination-button--current"),a.classList.add("pagination-button"),a}async function r(e){try{const t=await fetch(`${e}&page=${s}`);console.log(t);const n=await t.json(),a=Math.ceil(n.total_pages/20),i=n.results.map((e=>c(e.id))),l=await Promise.all(i);n.results.forEach(((e,t)=>{e.genres=l[t]})),o(n.results),function(e,t){const n=document.querySelector(".pagination-container");n.innerHTML="";const a=d("<",1===s,!1);if(a.addEventListener("click",(async()=>{s--,await r(t)})),a.classList.add("pagination-button--previous"),n.appendChild(a),e<=7)for(let a=1;a<=e;a++){const e=d(a.toString(),a===s,a===s);e.addEventListener("click",(async()=>{s=a,await r(t)})),n.appendChild(e)}else{const a=d("1",1===s,1===s);a.addEventListener("click",(async()=>{s=1,await r(t)})),n.appendChild(a);let c=Math.max(2,s-2),i=Math.min(e-1,s+2);s<=3?i=5:s>=e-2&&(c=e-4),c>2&&n.appendChild(d("...",!1));for(let e=c;e<=i;e++){const a=d(e.toString(),e===s,e===s);a.addEventListener("click",(async()=>{s=e,await r(t)})),n.appendChild(a)}i<e-1&&n.appendChild(d("...",!1));const o=d(e.toString(),s===e,s===e);o.addEventListener("click",(async()=>{s=e,await r(t)})),n.appendChild(o)}const c=d(">",s===e,!1);c.addEventListener("click",(async()=>{s++,await r(t)})),c.classList.add("pagination-button--next"),n.appendChild(c)}(a,e)}catch(e){console.log("Error",e)}}(async()=>{r(`https://api.themoviedb.org/3/trending/movie/day?language=en-US&api_key=${a}`)})();
//# sourceMappingURL=index.abcf98a1.js.map
