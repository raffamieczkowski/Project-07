function e(e){!function(e){const t=document.querySelector(".modal-movie"),o=document.querySelector(".backdrop"),n=`\n    <div class="modal-movie__poster-box">\n      <img class="modal-movie__poster" src="https://image.tmdb.org/t/p/original${e.poster_path}" alt="${e.original_title}" />\n    </div>\n    <button class="modal-movie__btn-close">&times\n    </button>\n\n    <div class="modal-movie__info">\n      <h2 class="modal-movie__title">${e.title}</h2>\n\n      <ul class="modal-movie__list">\n        <li class="modal-movie__item modal-movie__item--label">vote / votes</li>\n        <li class="modal-movie__item modal-movie__item--value">\n          <span class="modal-movie__vote">${e.vote_average.toFixed(1)}</span> <span>/ </span><span>${e.vote_count}</span>\n        </li>\n        <li class="modal-movie__item modal-movie__item--label">popularity</li>\n        <li class="modal-movie__item modal-movie__item--value"><span class="modal-movie__popularity">${e.popularity.toFixed(1)}</span></li>\n        <li class="modal-movie__item modal-movie__item--label">original title</li>\n        <li class="modal-movie__item modal-movie__item--value"><span class="modal-movie__original-title">${e.original_title}</span></li>\n        <li class="modal-movie__item modal-movie__item--label">genre</li>\n        <li class="modal-movie__item modal-movie__item--value"><span class="modal-movie__genre"></span></li>\n      </ul>\n      <div class="modal-movie__description">\n        <h3 class="modal-movie__about">about</h3>\n        <p class="modal-movie__text">${e.overview}</p>\n      </div>\n\n      <div class="modal-movie__btns">\n        <button class="modal-movie__btn-watched">add to watched</button>\n        <button class="modal-movie__btn-queue" data-id=${e.id}>add to queue</button>\n      </div>\n    </div>\n  `;function a(){o.classList.add("is-hidden")}t.innerHTML=n,t.querySelector(".modal-movie__btn-close").addEventListener("click",(()=>{a()})),o.addEventListener("click",(e=>{e.target===o&&a()})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&a()}))}(e)}const t="4c48f56c563cad897bb4af72634cd546";async function o(e){try{const o=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=${t}&language=en-US`),n=await o.json();return n.genres.map((e=>e.name)).join(", ")}catch(e){return console.error(e),""}}const n=document.querySelector(".result__container");function a(t){n.innerHTML="",t.forEach((t=>{const o=function(t){const o=document.createElement("div");o.classList.add("movie__card");const n=document.createElement("a");n.href="#";const a=document.createElement("img");a.classList.add("movie__poster"),a.src=`https://image.tmdb.org/t/p/original${t.poster_path}`,n.appendChild(a);const i=document.createElement("ul");i.classList.add("movie__short-descr");const s=document.createElement("li");s.classList.add("movie__title"),s.textContent=t.original_title,i.appendChild(s);const l=document.createElement("li");return l.classList.add("movie__genre"),l.textContent=`${t.genres} | ${t.release_date.slice(0,4)}`,i.appendChild(l),o.appendChild(n),o.appendChild(i),a.addEventListener("click",(o=>{o.preventDefault();document.querySelector(".backdrop").classList.remove("is-hidden"),e(t)})),o}(t);n.appendChild(o)}))}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".header__form"),o=document.querySelector(".form__input"),a=document.querySelector(".form__button");function i(e){e.preventDefault();const a=o.value.trim();""!==a?async function(e){const o=`https://api.themoviedb.org/3/search/movie?api_key=${t}&query=${encodeURIComponent(e)}`;(async()=>{l(o)})()}(a):(n.innerHTML="",fetchMovies())}e.addEventListener("submit",i),a.addEventListener("click",i)}));let i=1;function s(e,t,o){const n=document.createElement("button");return n.textContent=e,n.disabled=t,o&&n.classList.add("pagination-button--current"),n.classList.add("pagination-button"),n}async function l(e){try{const t=await fetch(`${e}&page=${i}`),n=await t.json(),c=Math.ceil(n.total_pages/20),d=n.results.map((e=>o(e.id))),m=await Promise.all(d);n.results.forEach(((e,t)=>{e.genres=m[t]})),a(n.results),function(e,t){const o=document.querySelector(".pagination-container");o.innerHTML="";const n=s("<",1===i,!1);if(n.addEventListener("click",(async()=>{i--,await l(t)})),n.classList.add("pagination-button--previous"),o.appendChild(n),e<=7)for(let n=1;n<=e;n++){const e=s(n.toString(),n===i,n===i);e.addEventListener("click",(async()=>{i=n,await l(t)})),o.appendChild(e)}else{const n=s("1",1===i,1===i);n.addEventListener("click",(async()=>{i=1,await l(t)})),o.appendChild(n);let a=Math.max(2,i-2),c=Math.min(e-1,i+2);i<=3?c=5:i>=e-2&&(a=e-4),a>2&&o.appendChild(s("...",!1));for(let e=a;e<=c;e++){const n=s(e.toString(),e===i,e===i);n.addEventListener("click",(async()=>{i=e,await l(t)})),o.appendChild(n)}c<e-1&&o.appendChild(s("...",!1));const d=s(e.toString(),i===e,i===e);d.addEventListener("click",(async()=>{i=e,await l(t)})),o.appendChild(d)}const a=s(">",i===e,!1);a.addEventListener("click",(async()=>{i++,await l(t)})),a.classList.add("pagination-button--next"),o.appendChild(a)}(c,e)}catch(e){console.log("Error",e)}}(async()=>{l(`https://api.themoviedb.org/3/trending/movie/day?language=en-US&api_key=${t}`)})();const c=new class{getFromLS(){let e;return e=null===localStorage.getItem("movies")?[]:JSON.parse(localStorage.getItem("movies")),e}saveIntoLS(e){const t=this.getFromLS();t.push(e),localStorage.setItem("movies",JSON.stringify(t))}};document.addEventListener("click",(e=>{if(e.target.classList.contains("modal-movie__btn-queue")){const t=e.target.offsetParent,o={id:e.target.dataset.id,name:t.querySelector(".modal-movie__title").textContent,poster:t.querySelector(".modal-movie__poster").src};c.saveIntoLS(o)}})),localStorage.clear();const d=document.querySelector(".header__toggle"),m=document.body;localStorage.getItem("darkModeEnabled")&&m.classList.add("dark-mode"),d.addEventListener("click",(e=>{e.preventDefault(),m.classList.toggle("dark-mode");const t=m.classList.contains("dark-mode");localStorage.setItem("darkModeEnabled",t)}));const r=document.querySelector(".cookies"),u=document.querySelector("#accept-cookies");document.addEventListener("DOMContentLoaded",(function(){sessionStorage.getItem("cookiesAccepted")?r.style.display="none":setTimeout((()=>{r.style.display="block"}),3e3)})),u.addEventListener("click",(function(){r.style.display="none",sessionStorage.setItem("cookiesAccepted",!0)}));
//# sourceMappingURL=index.c08ae449.js.map
